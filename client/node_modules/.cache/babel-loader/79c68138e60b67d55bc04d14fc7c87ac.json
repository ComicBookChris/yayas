{"ast":null,"code":"var _jsxFileName = \"C:\\\\e_commerce_project\\\\yayas\\\\client\\\\src\\\\pages\\\\admin\\\\sub\\\\SubUpdate.js\";\nimport React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { getCategories } from \"../../../functions/category\";\nimport { updateSub, getSub } from \"../../../functions/sub\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\n\nconst SubUpdate = ({\n  match,\n  history\n}) => {\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const [name, setName] = useState('');\n  const [loading, setLoading] = useState(false); // for list categories that is shown in the select option\n\n  const [categories, setCategories] = useState([]);\n  const [parent, setParent] = useState([]);\n  useEffect(() => {\n    loadCategories();\n    loadSub();\n  }, []);\n\n  const loadCategories = () => getCategories().then(c => setCategories(c.data));\n\n  const loadSub = () => getSub(match.params.slug).then(s => {\n    setName(s.data.name);\n    setParent(s.data.parent);\n  });\n\n  const handleSubmit = e => {\n    e.preventDefault(); // console.log(name);\n\n    setLoading(true);\n    updateSub(match.params.slug, {\n      name,\n      parent\n    }, user.token).then(res => {\n      // console.log(res)\n      setLoading(false);\n      setName('');\n      toast.success(`\"${res.data.name}\" is updated`);\n      history.push('/admin/slug');\n    }).catch(err => {\n      // console.log(err);\n      setLoading(false);\n      if (err.response.status === 400) toast.error(err.response.data);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(AdminNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 28\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 28\n    }\n  }, \"Update sub category\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, \"Parent Category\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"category\",\n    className: \"form-control\",\n    onChange: e => setParent(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  }, \"Please select\"), categories.length > 0 && categories.map(c => /*#__PURE__*/React.createElement(\"option\", {\n    key: c._id,\n    value: c._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 37\n    }\n  }, c.name)))), /*#__PURE__*/React.createElement(CategoryForm, {\n    handleSubmit: handleSubmit,\n    name: name,\n    setName: setName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default SubUpdate;","map":{"version":3,"sources":["C:/e_commerce_project/yayas/client/src/pages/admin/sub/SubUpdate.js"],"names":["React","useState","useEffect","AdminNav","toast","useSelector","getCategories","updateSub","getSub","CategoryForm","SubUpdate","match","history","user","state","name","setName","loading","setLoading","categories","setCategories","parent","setParent","loadCategories","loadSub","then","c","data","params","slug","s","handleSubmit","e","preventDefault","token","res","success","push","catch","err","response","status","error","target","value","length","map","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getCategories } from \"../../../functions/category\";\r\nimport { updateSub, getSub } from \"../../../functions/sub\";\r\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\r\n\r\nconst SubUpdate = ({match, history}) => {\r\n\r\n    const { user } = useSelector(state => ({ ...state }));\r\n    const [name, setName] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    // for list categories that is shown in the select option\r\n    const [categories, setCategories] = useState([]);\r\n\r\n    const [parent, setParent] = useState([]);\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n        loadSub();\r\n    }, []);\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => setCategories(c.data));\r\n\r\n    const loadSub = () =>\r\n        getSub(match.params.slug).then((s) => {\r\n            setName(s.data.name);\r\n            setParent(s.data.parent);\r\n        });\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // console.log(name);\r\n        setLoading(true);\r\n        updateSub(match.params.slug, { name, parent }, user.token)\r\n            .then((res) => {\r\n                // console.log(res)\r\n                setLoading(false);\r\n                setName('');\r\n                toast.success(`\"${res.data.name}\" is updated`);\r\n                history.push('/admin/slug')\r\n            })\r\n            .catch((err) => {\r\n                // console.log(err);\r\n                setLoading(false);\r\n                if (err.response.status === 400) toast.error(err.response.data);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div className='container-fluid'>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading\r\n                        ? (<h4 className=\"text-danger\">Loading...</h4>)\r\n                        : (<h4>Update sub category</h4>)\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <label>Parent Category</label>\r\n                        <select \r\n                        name=\"category\" \r\n                        className=\"form-control\"\r\n                        onChange={(e) => setParent(e.target.value)}\r\n                        >\r\n\r\n                        <option>Please select</option>\r\n\r\n                            {\r\n                                categories.length > 0 &&\r\n                                categories.map((c) => ( \r\n                                    <option key={c._id} value={c._id}>\r\n                                        {c.name}\r\n                                    </option>\r\n                                ))\r\n                            }\r\n                        </select>\r\n                    </div>\r\n                    {/* {JSON.stringify(category)} */}\r\n                    <CategoryForm\r\n                        handleSubmit={handleSubmit}\r\n                        name={name}\r\n                        setName={setName}\r\n                    />\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SubUpdate;"]},"metadata":{},"sourceType":"module"}