{"ast":null,"code":"var _jsxFileName = \"C:\\\\e_commerce_project\\\\yayas\\\\client\\\\src\\\\pages\\\\admin\\\\product\\\\ProductCreate.js\";\nimport React, { useState, useEffect } from 'react';\nimport AdminNav from '../../../components/nav/AdminNav';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux';\nimport { createProduct } from '../../../functions/product';\nimport ProductCreateForm from '../../../components/forms/ProductCreateForm';\nimport { getCategories, getCategorySubs } from '../../../functions/category';\nimport FileUpload from '../../../components/forms/FileUpload';\nimport { SyncOutlined } from '@ant-design/icons'; // const initialState = {\n//     title: 'Macbook Pro',\n//     description: 'This is the best Apple product',\n//     price: '4500',\n//     categories: [],\n//     category: '',\n//     subs: [],\n//     shipping: 'Yes',\n//     quantity: '34',\n//     images: [],\n//     colors: ['Black', 'Brown', 'Silver', 'White', 'Blue'],\n//     brands: ['Apple', 'Samsung', 'Microsoft', 'Lenovo', 'ASUS'],\n//     color: 'White',\n//     brand: 'Apple',\n// };\n\nconst ProductCreate = () => {\n  const [values, setValues] = useState(initialState);\n  const [subOptions, setSubOptions] = useState([]);\n  const [showSub, setShowSub] = useState(false);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () => getCategories().then(c => setValues({ ...values,\n    categories: c.data\n  })); // redux\n\n\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    createProduct(values, user.token).then(res => {\n      console.log(res);\n      window.alert(`\"${res.data.title}\" is created`);\n      window.location.reload();\n    }).catch(err => {\n      console.log(err); // if (err.response.status === 400) \n      // toast.error(err.response.data);\n\n      toast.error(err.response.data.err);\n    });\n  };\n\n  const handleChange = e => {\n    setValues({ ...values,\n      [e.target.name]: e.target.value\n    }); // console.log(e.target.name, \"----------\", e.target.value);\n  };\n\n  const handleCategoryChange = e => {\n    e.preventDefault();\n    console.log('CLICKED CATEGORY', e.target.value);\n    setValues({ ...values,\n      subs: [],\n      category: e.target.value\n    });\n    getCategorySubs(e.target.value).then(res => {\n      console.log('SUBS OPTIONS ON CATEGORY CLICK', res);\n      setSubOptions(res.data);\n    });\n    setShowSub(true);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(AdminNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, loading ? /*#__PURE__*/React.createElement(SyncOutlined, {\n    spin: true,\n    className: \"text-danger h1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 27\n    }\n  }) : /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 27\n    }\n  }, \"Product create\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FileUpload, {\n    values: values,\n    setValues: setValues,\n    setLoading: setLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(ProductCreateForm, {\n    handleSubmit: handleSubmit,\n    handleChange: handleChange,\n    setValues: setValues,\n    values: values,\n    handleCategoryChange: handleCategoryChange,\n    subOptions: subOptions,\n    showSub: showSub,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default ProductCreate;","map":{"version":3,"sources":["C:/e_commerce_project/yayas/client/src/pages/admin/product/ProductCreate.js"],"names":["React","useState","useEffect","AdminNav","toast","useSelector","createProduct","ProductCreateForm","getCategories","getCategorySubs","FileUpload","SyncOutlined","ProductCreate","values","setValues","initialState","subOptions","setSubOptions","showSub","setShowSub","loading","setLoading","loadCategories","then","c","categories","data","user","state","handleSubmit","e","preventDefault","token","res","console","log","window","alert","title","location","reload","catch","err","error","response","handleChange","target","name","value","handleCategoryChange","subs","category"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport AdminNav from '../../../components/nav/AdminNav';\r\nimport { toast } from 'react-toastify';\r\nimport { useSelector } from 'react-redux';\r\nimport { createProduct } from '../../../functions/product';\r\nimport ProductCreateForm from '../../../components/forms/ProductCreateForm';\r\n\r\nimport { getCategories, getCategorySubs } from '../../../functions/category';\r\nimport FileUpload from '../../../components/forms/FileUpload';\r\n\r\nimport { SyncOutlined } from '@ant-design/icons';\r\n\r\n// const initialState = {\r\n//     title: 'Macbook Pro',\r\n//     description: 'This is the best Apple product',\r\n//     price: '4500',\r\n//     categories: [],\r\n//     category: '',\r\n//     subs: [],\r\n//     shipping: 'Yes',\r\n//     quantity: '34',\r\n//     images: [],\r\n//     colors: ['Black', 'Brown', 'Silver', 'White', 'Blue'],\r\n//     brands: ['Apple', 'Samsung', 'Microsoft', 'Lenovo', 'ASUS'],\r\n//     color: 'White',\r\n//     brand: 'Apple',\r\n// };\r\n\r\nconst ProductCreate = () => {\r\n\r\n    const [values, setValues] = useState(initialState);\r\n    const [subOptions, setSubOptions] = useState([]);\r\n    const [showSub, setShowSub] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n    }, []);\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => setValues({ ...values, categories: c.data }));\r\n\r\n    // redux\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        createProduct(values, user.token)\r\n            .then(res => {\r\n                console.log(res);\r\n                window.alert(`\"${res.data.title}\" is created`);\r\n                window.location.reload();\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                // if (err.response.status === 400) \r\n                // toast.error(err.response.data);\r\n                toast.error(err.response.data.err);\r\n            });\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setValues({ ...values, [e.target.name]: e.target.value });\r\n        // console.log(e.target.name, \"----------\", e.target.value);\r\n    };\r\n\r\n    const handleCategoryChange = (e) => {\r\n        e.preventDefault();\r\n        console.log('CLICKED CATEGORY', e.target.value);\r\n        setValues({ ...values, subs: [], category: e.target.value });\r\n        getCategorySubs(e.target.value)\r\n            .then(res => {\r\n                console.log('SUBS OPTIONS ON CATEGORY CLICK', res);\r\n                setSubOptions(res.data);\r\n            });\r\n        setShowSub(true);\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n\r\n                <div className=\"col-md-10\">\r\n                    {loading\r\n                        ? <SyncOutlined spin className=\"text-danger h1\" />\r\n                        : <h4>Product create</h4>\r\n                    }\r\n                    <hr />\r\n\r\n                    {/* {JSON.stringify(values.images)} */}\r\n\r\n                    <div className=\"p-3\">\r\n                        <FileUpload\r\n                            values={values}\r\n                            setValues={setValues}\r\n                            setLoading={setLoading}\r\n                        />\r\n                    </div>\r\n\r\n                    <ProductCreateForm\r\n                        handleSubmit={handleSubmit}\r\n                        handleChange={handleChange}\r\n                        setValues={setValues}\r\n                        values={values}\r\n                        handleCategoryChange={handleCategoryChange}\r\n                        subOptions={subOptions}\r\n                        showSub={showSub}\r\n                    />\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\nexport default ProductCreate;"]},"metadata":{},"sourceType":"module"}