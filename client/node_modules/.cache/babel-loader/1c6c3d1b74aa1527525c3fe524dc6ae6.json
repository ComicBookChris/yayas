{"ast":null,"code":"var _jsxFileName = \"C:\\\\e_commerce_project\\\\yayas\\\\client\\\\src\\\\pages\\\\Product.js\";\nimport React, { useEffect, useState } from 'react';\nimport { getProduct, getRelated, productStar } from '../functions/product';\nimport SingleProduct from '../components/cards/SingleProduct';\nimport { useSelector } from 'react-redux';\n\nconst Product = ({\n  match\n}) => {\n  const [product, setProduct] = useState({});\n  const [related, setRelated] = useState([]);\n  /* state for star and by default it will \r\n  have the value of zero. Now pass star as props\r\n  in SingleProduct below, so it can be a value in \r\n  state. */\n\n  const [star, setStar] = useState(0); // redux\n\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const {\n    slug\n  } = match.params;\n  useEffect(() => {\n    loadSingleProduct();\n  }, [slug]);\n  useEffect(() => {\n    if (product.ratings && user) {\n      let existingRatingObject = product.ratings.find(\n      /* If any of these elements postedBy match this user from the redux.\r\n      That means we have existingRatingObject for that user. */\n      ele => ele.postedBy.toString() === user._id.toString());\n      /* Now that we have existingRatingObject, the code will extract the \r\n      star value and populate the state. */\n\n      existingRatingObject && setStar(existingRatingObject.star); // current user star\n    }\n  });\n\n  const loadSingleProduct = () => {\n    getProduct(slug).then(res => {\n      setProduct(res.data); // load related\n\n      getRelated(res.data._id).then(res => setRelated(res.data));\n    });\n  };\n\n  const onStarClick = (newRating, name) => {\n    /** setStar is the newRating, whatever is coming in */\n    setStar(newRating); // console.table(newRating, name);\n\n    /* The order of the parameters in productStar\r\n    is very important. Order is associated with \r\n    productStar in the backend file called function */\n\n    productStar(name, newRating, user.token).then(res => {\n      console.log(\"rating clicked\", res.data);\n      loadSingleProduct(); // if you want to show updated rating in real time\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SingleProduct\n  /* These are props being passed in from this parent page. */\n  , {\n    product: product,\n    onStarClick: onStarClick,\n    star: star,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col text-center pt-5 pb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"Related Products\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }), K)));\n};\n\nexport default Product;","map":{"version":3,"sources":["C:/e_commerce_project/yayas/client/src/pages/Product.js"],"names":["React","useEffect","useState","getProduct","getRelated","productStar","SingleProduct","useSelector","Product","match","product","setProduct","related","setRelated","star","setStar","user","state","slug","params","loadSingleProduct","ratings","existingRatingObject","find","ele","postedBy","toString","_id","then","res","data","onStarClick","newRating","name","token","console","log","K"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getProduct, getRelated, productStar } from '../functions/product';\r\nimport SingleProduct from '../components/cards/SingleProduct';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst Product = ({ match }) => {\r\n    const [product, setProduct] = useState({});\r\n    const [related, setRelated] = useState([]);\r\n    /* state for star and by default it will \r\n    have the value of zero. Now pass star as props\r\n    in SingleProduct below, so it can be a value in \r\n    state. */\r\n    const [star, setStar] = useState(0);\r\n    // redux\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    const { slug } = match.params;\r\n\r\n    useEffect(() => {\r\n        loadSingleProduct();\r\n    }, [slug]);\r\n\r\n    useEffect(() => {\r\n        if (product.ratings && user) {\r\n            let existingRatingObject = product.ratings.find(\r\n                /* If any of these elements postedBy match this user from the redux.\r\n                That means we have existingRatingObject for that user. */\r\n                (ele) => (ele.postedBy.toString() === user._id.toString()));\r\n                /* Now that we have existingRatingObject, the code will extract the \r\n                star value and populate the state. */\r\n        existingRatingObject && setStar(existingRatingObject.star); // current user star\r\n    }});\r\n\r\n    const loadSingleProduct = () => {\r\n        getProduct(slug).then((res) => {\r\n            setProduct(res.data);\r\n            // load related\r\n            getRelated(res.data._id).then(res => setRelated(res.data));\r\n        });\r\n    }\r\n        \r\n\r\n    const onStarClick = (newRating, name) => {\r\n        /** setStar is the newRating, whatever is coming in */\r\n        setStar(newRating);\r\n        // console.table(newRating, name);\r\n        /* The order of the parameters in productStar\r\n        is very important. Order is associated with \r\n        productStar in the backend file called function */\r\n        productStar(name, newRating, user.token)\r\n            .then((res) => {\r\n                console.log(\"rating clicked\", res.data);\r\n                loadSingleProduct(); // if you want to show updated rating in real time\r\n            })\r\n    };\r\n\r\n    return <div className=\"container-fluid\">\r\n        <div className=\"row p-4\">\r\n            <SingleProduct\r\n                /* These are props being passed in from this parent page. */\r\n                product={product}\r\n                onStarClick={onStarClick}\r\n                star={star}\r\n            />\r\n        </div>\r\n        <div className=\"row\">\r\n            <div className=\"col text-center pt-5 pb-5\">\r\n                <hr />\r\n                <h4>Related Products</h4>\r\n                <hr />\r\n                {K}\r\n            </div>\r\n        </div>\r\n    </div>\r\n};\r\n\r\nexport default Product;"]},"metadata":{},"sourceType":"module"}