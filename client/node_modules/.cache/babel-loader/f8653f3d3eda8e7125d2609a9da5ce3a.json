{"ast":null,"code":"var _jsxFileName = \"C:\\\\e_commerce_project\\\\yayas\\\\client\\\\src\\\\pages\\\\Shop.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { getProductsByCount, fetchProductsByFilter } from \"../functions/product\";\nimport { getCategories } from \"../functions/category\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport ProductCard from \"../components/cards/ProductCard\";\nimport { Menu, Slider, Checkbox } from \"antd\";\nimport { DollarOutlined, DownSquareOutlined } from \"@ant-design/icons\";\nconst {\n  SubMenu,\n  ItemGroup\n} = Menu;\n\nconst Shop = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [price, setPrice] = useState([0, 0]);\n  const [ok, setOk] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [categoryIds, setCategoryIds] = useState([]);\n  let dispatch = useDispatch();\n  let {\n    search\n  } = useSelector(state => ({ ...state\n  }));\n  const {\n    text\n  } = search;\n  useEffect(() => {\n    loadAllProducts(); // fetch categories\n\n    getCategories().then(res => setCategories(res.data));\n  }, []);\n\n  const fetchProducts = arg => {\n    fetchProductsByFilter(arg).then(res => {\n      setProducts(res.data);\n    });\n  }; //* 1. load products by default on page load\n\n\n  const loadAllProducts = () => {\n    getProductsByCount(12).then(p => {\n      setProducts(p.data);\n      setLoading(false);\n    });\n  }; //* 2. load products on user search input\n\n\n  useEffect(() => {\n    const delayed = setTimeout(() => {\n      fetchProducts({\n        query: text\n      });\n    }, 300);\n    return () => clearTimeout(delayed);\n  }, [text]); //* 3. load products based on price range\n\n  useEffect(() => {\n    console.log(\"ok to request\");\n    fetchProducts({\n      price\n    });\n  }, [ok]);\n\n  const handleSlider = value => {\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: {\n        text: \"\"\n      }\n    });\n    setCategoryIds([]);\n    setPrice(value);\n    setTimeout(() => {\n      setOk(!ok);\n    }, 300);\n  }; //* 4. load products based on category\n  // show categories in a list of checkbox\n\n\n  const showCategories = () => categories.map(c => /*#__PURE__*/React.createElement(\"div\", {\n    key: c._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    onChange: handleCheck,\n    className: \"pb-2 pl-4 pr-4\",\n    value: c._id,\n    name: \"category\",\n    checked: categoryIds.includes(c._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, c.name), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }))); // handle check for categories\n\n\n  const handleCheck = e => {\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: {\n        text: \"\"\n      }\n    });\n    setPrice([0, 0]); // console.log(e.target.value);\n\n    let inTheState = [...categoryIds];\n    let justChecked = e.target.value;\n    let foundInTheState = inTheState.indexOf(justChecked); // index or -1\n    // indexOf method ?? if not found returns -1 else return index [1,2,3,4,5]\n\n    if (foundInTheState === -1) {\n      inTheState.push(justChecked);\n    } else {\n      // if found pull out one item from index\n      inTheState.splice(foundInTheState, 1);\n    }\n\n    setCategoryIds(inTheState); // console.log(inTheState);\n\n    fetchProducts({\n      category: inTheState\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3 pt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, \"Search/Filter\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Menu, {\n    defaultOpenKeys: [\"1\", \"2\"],\n    mode: \"inline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SubMenu, {\n    key: \"1\",\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DollarOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    }), \" Price\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Slider, {\n    className: \"ml-4 mr-4\",\n    tipFormatter: v => `$${v}`,\n    range: true,\n    value: price,\n    onChange: handleSlider,\n    max: \"4999\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(SubMenu, {\n    key: \"2\",\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DownSquareOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }\n    }), \" Categories\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"-10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, showCategories())))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-9 pt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, \"Products\"), products.length < 1 && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 37\n    }\n  }, \"No products found\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row pb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, products.map(p => /*#__PURE__*/React.createElement(\"div\", {\n    key: p._id,\n    className: \"col-md-4 mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ProductCard, {\n    product: p,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  })))))));\n};\n\nexport default Shop;","map":{"version":3,"sources":["C:/e_commerce_project/yayas/client/src/pages/Shop.js"],"names":["React","useState","useEffect","getProductsByCount","fetchProductsByFilter","getCategories","useSelector","useDispatch","ProductCard","Menu","Slider","Checkbox","DollarOutlined","DownSquareOutlined","SubMenu","ItemGroup","Shop","products","setProducts","loading","setLoading","price","setPrice","ok","setOk","categories","setCategories","categoryIds","setCategoryIds","dispatch","search","state","text","loadAllProducts","then","res","data","fetchProducts","arg","p","delayed","setTimeout","query","clearTimeout","console","log","handleSlider","value","type","payload","showCategories","map","c","_id","handleCheck","includes","name","e","inTheState","justChecked","target","foundInTheState","indexOf","push","splice","category","v","marginTop","length"],"mappings":"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","sourcesContent":["    import React, { useState, useEffect } from \"react\";\r\n    import {\r\n    getProductsByCount,\r\n    fetchProductsByFilter,\r\n    } from \"../functions/product\";\r\n    import { getCategories } from \"../functions/category\";\r\n    import { useSelector, useDispatch } from \"react-redux\";\r\n    import ProductCard from \"../components/cards/ProductCard\";\r\n    import { Menu, Slider, Checkbox } from \"antd\";\r\n    import { DollarOutlined, DownSquareOutlined } from \"@ant-design/icons\";\r\n\r\n    const { SubMenu, ItemGroup } = Menu;\r\n\r\n    const Shop = () => {\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [price, setPrice] = useState([0, 0]);\r\n    const [ok, setOk] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n    const [categoryIds, setCategoryIds] = useState([]);\r\n\r\n    let dispatch = useDispatch();\r\n    let { search } = useSelector((state) => ({ ...state }));\r\n    const { text } = search;\r\n\r\n    useEffect(() => {\r\n        loadAllProducts();\r\n        // fetch categories\r\n        getCategories().then((res) => setCategories(res.data));\r\n    }, []);\r\n\r\n    const fetchProducts = (arg) => {\r\n        fetchProductsByFilter(arg).then((res) => {\r\n        setProducts(res.data);\r\n        });\r\n    };\r\n\r\n    //* 1. load products by default on page load\r\n    const loadAllProducts = () => {\r\n        getProductsByCount(12).then((p) => {\r\n        setProducts(p.data);\r\n        setLoading(false);\r\n        });\r\n    };\r\n\r\n    //* 2. load products on user search input\r\n    useEffect(() => {\r\n        const delayed = setTimeout(() => {\r\n        fetchProducts({ query: text });\r\n        }, 300);\r\n        return () => clearTimeout(delayed);\r\n    }, [text]);\r\n\r\n    //* 3. load products based on price range\r\n    useEffect(() => {\r\n        console.log(\"ok to request\");\r\n        fetchProducts({ price });\r\n    }, [ok]);\r\n\r\n    const handleSlider = (value) => {\r\n        dispatch({\r\n        type: \"SEARCH_QUERY\",\r\n        payload: { text: \"\" },\r\n        });\r\n        setCategoryIds([]);\r\n        setPrice(value);\r\n        setTimeout(() => {\r\n        setOk(!ok);\r\n        }, 300);\r\n    };\r\n\r\n    //* 4. load products based on category\r\n    // show categories in a list of checkbox\r\n    const showCategories = () =>\r\n        categories.map((c) => (\r\n        <div key={c._id}>\r\n            <Checkbox\r\n            onChange={handleCheck}\r\n            className=\"pb-2 pl-4 pr-4\"\r\n            value={c._id}\r\n            name=\"category\"\r\n            checked={categoryIds.includes(c._id)}\r\n            >\r\n            {c.name}\r\n            </Checkbox>\r\n            <br />\r\n        </div>\r\n        ));\r\n\r\n    // handle check for categories\r\n    const handleCheck = (e) => {\r\n        dispatch({\r\n        type: \"SEARCH_QUERY\",\r\n        payload: { text: \"\" },\r\n        });\r\n        setPrice([0, 0]);\r\n        // console.log(e.target.value);\r\n        let inTheState = [...categoryIds];\r\n        let justChecked = e.target.value;\r\n        let foundInTheState = inTheState.indexOf(justChecked); // index or -1\r\n\r\n        // indexOf method ?? if not found returns -1 else return index [1,2,3,4,5]\r\n        if (foundInTheState === -1) {\r\n        inTheState.push(justChecked);\r\n        } else {\r\n        // if found pull out one item from index\r\n        inTheState.splice(foundInTheState, 1);\r\n        }\r\n\r\n        setCategoryIds(inTheState);\r\n        // console.log(inTheState);\r\n        fetchProducts({ category: inTheState });\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n            <div className=\"col-md-3 pt-2\">\r\n            <h4>Search/Filter</h4>\r\n            <hr />\r\n\r\n            <Menu defaultOpenKeys={[\"1\", \"2\"]} mode=\"inline\">\r\n                {/* price */}\r\n                <SubMenu\r\n                key=\"1\"\r\n                title={\r\n                    <span className=\"h6\">\r\n                    <DollarOutlined /> Price\r\n                    </span>\r\n                }\r\n                >\r\n                <div>\r\n                    <Slider\r\n                    className=\"ml-4 mr-4\"\r\n                    tipFormatter={(v) => `$${v}`}\r\n                    range\r\n                    value={price}\r\n                    onChange={handleSlider}\r\n                    max=\"4999\"\r\n                    />\r\n                </div>\r\n                </SubMenu>\r\n\r\n                {/* category */}\r\n                <SubMenu\r\n                key=\"2\"\r\n                title={\r\n                    <span className=\"h6\">\r\n                    <DownSquareOutlined /> Categories\r\n                    </span>\r\n                }\r\n                >\r\n                <div style={{ marginTop: \"-10px\" }}>{showCategories()}</div>\r\n                </SubMenu>\r\n            </Menu>\r\n            </div>\r\n\r\n            <div className=\"col-md-9 pt-2\">\r\n            {loading ? (\r\n                <h4 className=\"text-danger\">Loading...</h4>\r\n            ) : (\r\n                <h4 className=\"text-danger\">Products</h4>\r\n            )}\r\n\r\n            {products.length < 1 && <p>No products found</p>}\r\n\r\n            <div className=\"row pb-5\">\r\n                {products.map((p) => (\r\n                <div key={p._id} className=\"col-md-4 mt-3\">\r\n                    <ProductCard product={p} />\r\n                </div>\r\n                ))}\r\n            </div>\r\n            </div>\r\n        </div>\r\n        </div>\r\n    );\r\n    };\r\n\r\n    export default Shop;"]},"metadata":{},"sourceType":"module"}