{"ast":null,"code":"var _jsxFileName = \"C:\\\\e_commerce_project\\\\yayas\\\\client\\\\src\\\\App.js\";\nimport React, { useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Login from './pages/auth/Login';\nimport Register from './pages/auth/Register';\nimport Home from './pages/Home';\nimport Header from './components/nav/Header';\nimport RegisterComplete from './pages/auth/RegisterComplete';\nimport ForgotPassword from './pages/auth/ForgotPassword';\nimport { auth } from './firebase';\nimport { useDispatch } from 'react-redux';\nimport { currentUser } from './functions/auth';\nimport History from './pages/user/History';\n\nconst App = () => {\n  const dispatch = useDispatch(); //to check firebase auth state\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async user => {\n      if (user) {\n        const idTokenResult = await user.getIdTokenResult();\n        console.log('user', user);\n        currentUser(idTokenResult.token).then(res => {\n          dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload: {\n              name: res.data.name,\n              email: res.data.email,\n              token: idTokenResult.token,\n              role: res.data.role,\n              _id: res.data._id\n            }\n          });\n        }).catch(err => console.log(err));\n      }\n    }); //cleanup\n\n    return () => unsubscribe();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ToastContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: Home,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/login\",\n    component: Login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/register\",\n    component: Register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/register/complete\",\n    component: RegisterComplete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/forgot/password\",\n    component: ForgotPassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Useroute, {\n    exact: true,\n    path: \"/user/history\",\n    component: History,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["C:/e_commerce_project/yayas/client/src/App.js"],"names":["React","useEffect","Switch","Route","ToastContainer","Login","Register","Home","Header","RegisterComplete","ForgotPassword","auth","useDispatch","currentUser","History","App","dispatch","unsubscribe","onAuthStateChanged","user","idTokenResult","getIdTokenResult","console","log","token","then","res","type","payload","name","data","email","role","_id","catch","err"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport Login from './pages/auth/Login';\nimport Register from './pages/auth/Register';\nimport Home from './pages/Home';\nimport Header from './components/nav/Header';\nimport RegisterComplete from './pages/auth/RegisterComplete';\nimport ForgotPassword from './pages/auth/ForgotPassword';\n\nimport { auth } from './firebase';\nimport { useDispatch } from 'react-redux';\nimport { currentUser } from './functions/auth';\nimport History from './pages/user/History';\n\nconst App = () => {\n  const dispatch = useDispatch()\n\n  //to check firebase auth state\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if(user) {\n        const idTokenResult = await user.getIdTokenResult()\n        console.log('user', user);\n\n        currentUser(idTokenResult.token)\n        .then(\n            res => {\n                dispatch({\n                    type: \"LOGGED_IN_USER\",\n                    payload: {\n                        name: res.data.name,\n                        email: res.data.email,\n                        token: idTokenResult.token,\n                        role: res.data.role,\n                        _id: res.data._id,\n                    },\n                });\n            })\n        .catch ((err) => console.log(err));\n        \n      }\n    })\n    //cleanup\n    return () => unsubscribe();\n  }, [])\n\n  return (\n    <>\n      <Header />\n      <ToastContainer />\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/login\" component={Login} />\n        <Route exact path=\"/register\" component={Register} />\n        <Route exact path=\"/register/complete\" component={RegisterComplete} />\n        <Route exact path=\"/forgot/password\" component={ForgotPassword} />\n        <Useroute exact path=\"/user/history\" component={History} />\n\n\n      </Switch>\n    </>\n  )\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}