{"ast":null,"code":"var _jsxFileName = \"C:\\\\e_commerce_project\\\\yayas\\\\client\\\\src\\\\pages\\\\Shop.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { getProductsByCount, fetchProductsByFilter } from \"../functions/product\";\nimport { getCategories } from \"../functions/category\";\nimport { getSubs } from \"../functions/sub\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport ProductCard from \"../components/cards/ProductCard\";\nimport { Menu, Slider, Checkbox, Radio } from \"antd\";\nimport { DollarOutlined, DownSquareOutlined, StarOutlined } from \"@ant-design/icons\";\nimport Star from '../components/forms/Star';\nconst {\n  SubMenu,\n  ItemGroup\n} = Menu;\n\nconst Shop = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [price, setPrice] = useState([0, 0]);\n  const [ok, setOk] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [categoryIds, setCategoryIds] = useState([]);\n  const [star, setStar] = useState(\"\");\n  const [subs, setSubs] = useState([]);\n  const [sub, setSub] = useState(\"\");\n  const [brands, setBrands] = useState(['Apple', 'Samsung', 'Microsoft', 'Lenovo', 'ASUS']);\n  const [brand, setBrand] = useState(\"\");\n  const [colors, setColors] = useState(['Black', 'Brown', 'Silver', 'White', 'Blue']);\n  const [color, setColor] = useState(\"\");\n  const [shipping, setShipping] = useState(\"\");\n  let dispatch = useDispatch();\n  let {\n    search\n  } = useSelector(state => ({ ...state\n  }));\n  const {\n    text\n  } = search;\n  useEffect(() => {\n    loadAllProducts(); // fetch categories\n\n    getCategories().then(res => setCategories(res.data)); // fetch subcategories\n\n    getSubs().then(res => setSubs(res.data));\n  }, []);\n\n  const fetchProducts = arg => {\n    fetchProductsByFilter(arg).then(res => {\n      setProducts(res.data);\n    });\n  }; //* 1. load products by default on page load\n\n\n  const loadAllProducts = () => {\n    getProductsByCount(12).then(p => {\n      setProducts(p.data);\n      setLoading(false);\n    });\n  }; //* 2. load products on user search input\n\n\n  useEffect(() => {\n    const delayed = setTimeout(() => {\n      fetchProducts({\n        query: text\n      });\n    }, 300);\n    return () => clearTimeout(delayed);\n  }, [text]); //* 3. load products based on price range\n\n  useEffect(() => {\n    console.log(\"ok to request\");\n    fetchProducts({\n      price\n    });\n  }, [ok]);\n\n  const handleSlider = value => {\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: {\n        text: \"\"\n      }\n    }); //reset\n\n    setCategoryIds([]);\n    setPrice(value);\n    setStar(\"\");\n    setSub(\"\");\n    setBrand(\"\");\n    setColor(\"\");\n    setTimeout(() => {\n      setOk(!ok);\n    }, 300);\n  }; //* 4. load products based on category\n  // show categories in a list of checkbox\n\n\n  const showCategories = () => categories.map(c => /*#__PURE__*/React.createElement(\"div\", {\n    key: c._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    onChange: handleCheck,\n    className: \"pb-2 pl-4 pr-4\",\n    value: c._id,\n    name: \"category\",\n    checked: categoryIds.includes(c._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, c.name), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }))); // handle check for categories\n\n\n  const handleCheck = e => {\n    //reset\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: {\n        text: \"\"\n      }\n    });\n    setPrice([0, 0]);\n    setStar(\"\");\n    setSub(\"\");\n    setBrand(\"\");\n    setColor(\"\"); // console.log(e.target.value);\n\n    let inTheState = [...categoryIds];\n    let justChecked = e.target.value;\n    let foundInTheState = inTheState.indexOf(justChecked); // index or -1\n    // indexOf method ?? if not found returns -1 else return index [1,2,3,4,5]\n\n    if (foundInTheState === -1) {\n      inTheState.push(justChecked);\n    } else {\n      // if found pull out one item from index\n      inTheState.splice(foundInTheState, 1);\n    }\n\n    setCategoryIds(inTheState); // console.log(inTheState);\n\n    fetchProducts({\n      category: inTheState\n    });\n  }; //* 5. Show product by star rating\n\n\n  const handleStarClick = num => {\n    // console.log(num);\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: {\n        text: \"\"\n      }\n    });\n    setPrice([0, 0]);\n    setCategoryIds([]);\n    setStar(num);\n    setSub(\"\");\n    setBrand(\"\");\n    setColor(\"\");\n    fetchProducts({\n      stars: num\n    });\n  };\n\n  const showStars = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pr-4 pl-4 pb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Star, {\n    starClick: handleStarClick,\n    numberOfStars: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Star, {\n    starClick: handleStarClick,\n    numberOfStars: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Star, {\n    starClick: handleStarClick,\n    numberOfStars: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Star, {\n    starClick: handleStarClick,\n    numberOfStars: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Star, {\n    starClick: handleStarClick,\n    numberOfStars: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  })); //* 6. show products by subcategories\n\n\n  const showSubs = () => subs.map(s => /*#__PURE__*/React.createElement(\"div\", {\n    key: s._id,\n    onClick: () => handleSub(s),\n    className: \"p-1 m-1 badge badge-primary\",\n    style: {\n      cursor: \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, s.name));\n\n  const handleSub = sub => {\n    // console.log(\"SUB\", sub);\n    setSub(sub);\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: {\n        text: \"\"\n      }\n    });\n    setPrice([0, 0]);\n    setCategoryIds([]);\n    setStar(\"\");\n    setBrand(\"\");\n    setColor(\"\");\n    fetchProducts({\n      sub: sub\n    });\n  }; //* 7. show products based on brand name\n\n\n  const showBrands = () => brands.map(b => /*#__PURE__*/React.createElement(Radio, {\n    value: b,\n    name: b,\n    checked: b === brand,\n    onChange: handleBrand,\n    className: \"pb-1 pl-4 pr-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, b));\n\n  const handleBrand = e => {\n    setSub(\"\");\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: {\n        text: \"\"\n      }\n    });\n    setPrice([0, 0]);\n    setCategoryIds([]);\n    setStar(\"\");\n    setColor(\"\");\n    setBrand(e.target.value);\n    fetchProducts({\n      brand: e.target.value\n    });\n  }; //* 8. show products based on color\n\n\n  const showColors = () => colors.map(c => /*#__PURE__*/React.createElement(Radio, {\n    value: c,\n    name: c,\n    checked: c === color,\n    onChange: handleColor,\n    className: \"pb-1 pl-4 pr-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 9\n    }\n  }, c));\n\n  const handleColor = e => {\n    setSub(\"\");\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: {\n        text: \"\"\n      }\n    });\n    setPrice([0, 0]);\n    setCategoryIds([]);\n    setStar(\"\");\n    setBrand(\"\");\n    setColor(e.target.value);\n    fetchProducts({\n      color: e.target.value\n    });\n  }; //* 9.\n\n\n  const showShipping = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Checkbox, {\n    className: \"pb-2 pl-4 pr-4\",\n    onChange: handleShippingChange,\n    value: \"Yes\",\n    checked: shipping === \"Yes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    className: \"pb-2 pl-4 pr-4\",\n    onChange: handleShippingChange,\n    value: \"Yes\",\n    checked: shipping === \"Yes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 25\n    }\n  }));\n\n  const handleShipping = e => {\n    setSub(\"\");\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: {\n        text: \"\"\n      }\n    });\n    setPrice([0, 0]);\n    setCategoryIds([]);\n    setStar(\"\");\n    setBrand(\"\");\n    setShipping(e.target.value);\n    fetchProducts({\n      shipping: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3 pt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 21\n    }\n  }, \"Search/Filter\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Menu, {\n    defaultOpenKeys: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"],\n    mode: \"inline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(SubMenu, {\n    key: \"1\",\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(DollarOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 37\n      }\n    }), \" Price\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Slider, {\n    className: \"ml-4 mr-4\",\n    tipFormatter: v => `$${v}`,\n    range: true,\n    value: price,\n    onChange: handleSlider,\n    max: \"4999\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(SubMenu, {\n    key: \"2\",\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(DownSquareOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 37\n      }\n    }), \" Categories\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"-10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 29\n    }\n  }, showCategories())), /*#__PURE__*/React.createElement(SubMenu, {\n    key: \"3\",\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(StarOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 37\n      }\n    }), \" Rating\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"-10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 29\n    }\n  }, showStars())), /*#__PURE__*/React.createElement(SubMenu, {\n    key: \"4\",\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(DownSquareOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 37\n      }\n    }), \" SubCategories\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"-10px\"\n    },\n    className: \"pl-4 pr-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 29\n    }\n  }, showSubs())), /*#__PURE__*/React.createElement(SubMenu, {\n    key: \"5\",\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(DownSquareOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 37\n      }\n    }), \" Brands\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"-10px\"\n    },\n    className: \"pr-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 29\n    }\n  }, showBrands())), /*#__PURE__*/React.createElement(SubMenu, {\n    key: \"6\",\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(DownSquareOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 37\n      }\n    }), \" Colors\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"-10px\"\n    },\n    className: \"pr-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 29\n    }\n  }, showColors())), /*#__PURE__*/React.createElement(SubMenu, {\n    key: \"7\",\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      className: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(DownSquareOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 37\n      }\n    }), \" Shipping\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"-10px\"\n    },\n    className: \"pr-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 29\n    }\n  }, showShipping())))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-9 pt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 17\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 25\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 29\n    }\n  }, \"Products\"), products.length < 1 && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 45\n    }\n  }, \"No products found\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row pb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 21\n    }\n  }, products.map(p => /*#__PURE__*/React.createElement(\"div\", {\n    key: p._id,\n    className: \"col-md-4 mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(ProductCard, {\n    product: p,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 33\n    }\n  })))))));\n};\n\nexport default Shop;","map":{"version":3,"sources":["C:/e_commerce_project/yayas/client/src/pages/Shop.js"],"names":["React","useState","useEffect","getProductsByCount","fetchProductsByFilter","getCategories","getSubs","useSelector","useDispatch","ProductCard","Menu","Slider","Checkbox","Radio","DollarOutlined","DownSquareOutlined","StarOutlined","Star","SubMenu","ItemGroup","Shop","products","setProducts","loading","setLoading","price","setPrice","ok","setOk","categories","setCategories","categoryIds","setCategoryIds","star","setStar","subs","setSubs","sub","setSub","brands","setBrands","brand","setBrand","colors","setColors","color","setColor","shipping","setShipping","dispatch","search","state","text","loadAllProducts","then","res","data","fetchProducts","arg","p","delayed","setTimeout","query","clearTimeout","console","log","handleSlider","value","type","payload","showCategories","map","c","_id","handleCheck","includes","name","e","inTheState","justChecked","target","foundInTheState","indexOf","push","splice","category","handleStarClick","num","stars","showStars","showSubs","s","handleSub","cursor","showBrands","b","handleBrand","showColors","handleColor","showShipping","handleShippingChange","handleShipping","v","marginTop","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    getProductsByCount,\r\n    fetchProductsByFilter,\r\n} from \"../functions/product\";\r\nimport { getCategories } from \"../functions/category\";\r\nimport { getSubs } from \"../functions/sub\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport ProductCard from \"../components/cards/ProductCard\";\r\nimport { Menu, Slider, Checkbox, Radio } from \"antd\";\r\nimport { DollarOutlined, DownSquareOutlined, StarOutlined } from \"@ant-design/icons\";\r\nimport Star from '../components/forms/Star';\r\n\r\nconst { SubMenu, ItemGroup } = Menu;\r\n\r\nconst Shop = () => {\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [price, setPrice] = useState([0, 0]);\r\n    const [ok, setOk] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n    const [categoryIds, setCategoryIds] = useState([]);\r\n    const [star, setStar] = useState(\"\");\r\n    const [subs, setSubs] = useState([]);\r\n    const [sub, setSub] = useState(\"\");\r\n    const [brands, setBrands] = useState(\r\n        [\r\n            'Apple',\r\n            'Samsung',\r\n            'Microsoft',\r\n            'Lenovo',\r\n            'ASUS',\r\n        ]\r\n    );\r\n    const [brand, setBrand] = useState(\"\");\r\n\r\n    const [colors, setColors] = useState(\r\n        [\r\n            'Black', \r\n            'Brown', \r\n            'Silver', \r\n            'White', \r\n            'Blue',\r\n        ]\r\n    );\r\n    const [color, setColor] = useState(\"\");\r\n    const [shipping, setShipping] = useState(\"\");\r\n\r\n    let dispatch = useDispatch();\r\n    let { search } = useSelector((state) => ({ ...state }));\r\n    const { text } = search;\r\n\r\n    useEffect(() => {\r\n        loadAllProducts();\r\n        // fetch categories\r\n        getCategories().then((res) => setCategories(res.data));\r\n        // fetch subcategories\r\n        getSubs().then((res) => setSubs(res.data));\r\n    }, []);\r\n\r\n    const fetchProducts = (arg) => {\r\n        fetchProductsByFilter(arg).then((res) => {\r\n            setProducts(res.data);\r\n        });\r\n    };\r\n\r\n    //* 1. load products by default on page load\r\n    const loadAllProducts = () => {\r\n        getProductsByCount(12).then((p) => {\r\n            setProducts(p.data);\r\n            setLoading(false);\r\n        });\r\n    };\r\n\r\n    //* 2. load products on user search input\r\n    useEffect(() => {\r\n        const delayed = setTimeout(() => {\r\n            fetchProducts({ query: text });\r\n        }, 300);\r\n        return () => clearTimeout(delayed);\r\n    }, [text]);\r\n\r\n    //* 3. load products based on price range\r\n    useEffect(() => {\r\n        console.log(\"ok to request\");\r\n        fetchProducts({ price });\r\n    }, [ok]);\r\n\r\n    const handleSlider = (value) => {\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" },\r\n        });\r\n        //reset\r\n        setCategoryIds([]);\r\n        setPrice(value);\r\n        setStar(\"\");\r\n        setSub(\"\");\r\n        setBrand(\"\");\r\n        setColor(\"\");\r\n        setTimeout(() => {\r\n            setOk(!ok);\r\n        }, 300);\r\n    };\r\n\r\n    //* 4. load products based on category\r\n    // show categories in a list of checkbox\r\n    const showCategories = () =>\r\n        categories.map((c) => (\r\n            <div key={c._id}>\r\n                <Checkbox\r\n                    onChange={handleCheck}\r\n                    className=\"pb-2 pl-4 pr-4\"\r\n                    value={c._id}\r\n                    name=\"category\"\r\n                    checked={categoryIds.includes(c._id)}\r\n                >\r\n                    {c.name}\r\n                </Checkbox>\r\n                <br />\r\n            </div>\r\n        ));\r\n\r\n    // handle check for categories\r\n    const handleCheck = (e) => {\r\n        //reset\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" },\r\n        });\r\n        setPrice([0, 0]);\r\n        setStar(\"\");\r\n        setSub(\"\");\r\n        setBrand(\"\");\r\n        setColor(\"\");\r\n        // console.log(e.target.value);\r\n        let inTheState = [...categoryIds];\r\n        let justChecked = e.target.value;\r\n        let foundInTheState = inTheState.indexOf(justChecked); // index or -1\r\n\r\n        // indexOf method ?? if not found returns -1 else return index [1,2,3,4,5]\r\n        if (foundInTheState === -1) {\r\n            inTheState.push(justChecked);\r\n        } else {\r\n            // if found pull out one item from index\r\n            inTheState.splice(foundInTheState, 1);\r\n        }\r\n\r\n        setCategoryIds(inTheState);\r\n        // console.log(inTheState);\r\n        fetchProducts({ category: inTheState });\r\n    };\r\n\r\n    //* 5. Show product by star rating\r\n    const handleStarClick = (num) => {\r\n        // console.log(num);\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" },\r\n        });\r\n        setPrice([0, 0]);\r\n        setCategoryIds([]);\r\n        setStar(num);\r\n        setSub(\"\");\r\n        setBrand(\"\");\r\n        setColor(\"\");\r\n        fetchProducts({ stars: num });\r\n    };\r\n\r\n    const showStars = () => (\r\n        <div className=\"pr-4 pl-4 pb-2\">\r\n            <Star starClick={handleStarClick} numberOfStars={5} />\r\n            <Star starClick={handleStarClick} numberOfStars={4} />\r\n            <Star starClick={handleStarClick} numberOfStars={3} />\r\n            <Star starClick={handleStarClick} numberOfStars={2} />\r\n            <Star starClick={handleStarClick} numberOfStars={1} />\r\n        </div>\r\n    );\r\n\r\n    //* 6. show products by subcategories\r\n    const showSubs = () => subs.map((s) =>\r\n        <div\r\n            key={s._id}\r\n            onClick={() => handleSub(s)}\r\n            className=\"p-1 m-1 badge badge-primary\"\r\n            style={{ cursor: \"pointer\" }}\r\n        >\r\n            {s.name}\r\n        </div>);\r\n\r\n    const handleSub = (sub) => {\r\n        // console.log(\"SUB\", sub);\r\n        setSub(sub)\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" },\r\n        });\r\n        setPrice([0, 0]);\r\n        setCategoryIds([]);\r\n        setStar(\"\");\r\n        setBrand(\"\");\r\n        setColor(\"\");\r\n        fetchProducts({ sub: sub });\r\n    }\r\n\r\n    //* 7. show products based on brand name\r\n    const showBrands = () => brands.map((b) => (\r\n        <Radio\r\n            value={b}\r\n            name={b}\r\n            checked={b === brand}\r\n            onChange={handleBrand}\r\n            className=\"pb-1 pl-4 pr-4\"\r\n        >\r\n            {b}\r\n        </Radio>\r\n    ));\r\n\r\n    const handleBrand = (e) => {\r\n        setSub(\"\")\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" },\r\n        });\r\n        setPrice([0, 0]);\r\n        setCategoryIds([]);\r\n        setStar(\"\");\r\n        setColor(\"\");\r\n        setBrand(e.target.value);\r\n        fetchProducts({ brand: e.target.value });\r\n    }\r\n\r\n    //* 8. show products based on color\r\n    const showColors = () => \r\n    colors.map((c) => (\r\n        <Radio\r\n            value={c}\r\n            name={c}\r\n            checked={c === color}\r\n            onChange={handleColor}\r\n            className=\"pb-1 pl-4 pr-4\"\r\n        >\r\n            {c}\r\n        </Radio>\r\n    ));\r\n\r\n    const handleColor = (e) => {\r\n        setSub(\"\")\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" },\r\n        });\r\n        setPrice([0, 0]);\r\n        setCategoryIds([]);\r\n        setStar(\"\");\r\n        setBrand(\"\");\r\n        setColor(e.target.value);\r\n        fetchProducts({ color: e.target.value });\r\n    }\r\n\r\n    //* 9.\r\n    const showShipping = () => (\r\n        <>\r\n            <Checkbox \r\n            className=\"pb-2 pl-4 pr-4\"\r\n            onChange={handleShippingChange}\r\n            value=\"Yes\"\r\n            checked={shipping === \"Yes\"}\r\n            />\r\n                        <Checkbox \r\n            className=\"pb-2 pl-4 pr-4\"\r\n            onChange={handleShippingChange}\r\n            value=\"Yes\"\r\n            checked={shipping === \"Yes\"}\r\n            />\r\n        </>\r\n    );\r\n\r\n    const handleShipping = (e) => {\r\n        setSub(\"\")\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" },\r\n        });\r\n        setPrice([0, 0]);\r\n        setCategoryIds([]);\r\n        setStar(\"\");\r\n        setBrand(\"\");\r\n        setShipping(e.target.value)\r\n        fetchProducts({ shipping: e.target.value });\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3 pt-2\">\r\n                    <h4>Search/Filter</h4>\r\n                    <hr />\r\n\r\n                    <Menu defaultOpenKeys={[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"]} mode=\"inline\">\r\n                        {/* price */}\r\n                        <SubMenu\r\n                            key=\"1\"\r\n                            title={\r\n                                <span className=\"h6\">\r\n                                    <DollarOutlined /> Price\r\n                    </span>\r\n                            }\r\n                        >\r\n                            <div>\r\n                                <Slider\r\n                                    className=\"ml-4 mr-4\"\r\n                                    tipFormatter={(v) => `$${v}`}\r\n                                    range\r\n                                    value={price}\r\n                                    onChange={handleSlider}\r\n                                    max=\"4999\"\r\n                                />\r\n                            </div>\r\n                        </SubMenu>\r\n\r\n                        {/* category */}\r\n                        <SubMenu\r\n                            key=\"2\"\r\n                            title={\r\n                                <span className=\"h6\">\r\n                                    <DownSquareOutlined /> Categories\r\n                                </span>\r\n                            }\r\n                        >\r\n                            <div style={{ marginTop: \"-10px\" }}>{showCategories()}</div>\r\n                        </SubMenu>\r\n\r\n                        {/** stars */}\r\n                        <SubMenu\r\n                            key=\"3\"\r\n                            title={\r\n                                <span className=\"h6\">\r\n                                    <StarOutlined /> Rating\r\n                                </span>\r\n                            }\r\n                        >\r\n                            <div style={{ marginTop: \"-10px\" }}>{showStars()}</div>\r\n                        </SubMenu>\r\n\r\n                        {/** subcategories */}\r\n                        <SubMenu\r\n                            key=\"4\"\r\n                            title={\r\n                                <span className=\"h6\">\r\n                                    <DownSquareOutlined /> SubCategories\r\n                                </span>\r\n                            }\r\n                        >\r\n                            <div style={{ marginTop: \"-10px\" }} className=\"pl-4 pr-4\">{showSubs()}</div>\r\n                        </SubMenu>\r\n                        {/** brands */}\r\n                        <SubMenu\r\n                            key=\"5\"\r\n                            title={\r\n                                <span className=\"h6\">\r\n                                    <DownSquareOutlined /> Brands\r\n                                </span>\r\n                            }\r\n                        >\r\n                            <div style={{ marginTop: \"-10px\" }} className=\"pr-4\">{showBrands()}</div>\r\n                        </SubMenu>\r\n                        {/** colors */}\r\n                        <SubMenu\r\n                            key=\"6\"\r\n                            title={\r\n                                <span className=\"h6\">\r\n                                    <DownSquareOutlined /> Colors\r\n                                </span>\r\n                            }\r\n                        >\r\n                            <div style={{ marginTop: \"-10px\" }} className=\"pr-4\">{showColors()}</div>\r\n                        </SubMenu>\r\n                        {/** shipping */}\r\n                        <SubMenu\r\n                            key=\"7\"\r\n                            title={\r\n                                <span className=\"h6\">\r\n                                    <DownSquareOutlined /> Shipping\r\n                                </span>\r\n                            }\r\n                        >\r\n                            <div style={{ marginTop: \"-10px\" }} className=\"pr-4\">{showShipping()}</div>\r\n                        </SubMenu>\r\n                    </Menu>\r\n                </div>\r\n\r\n                <div className=\"col-md-9 pt-2\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                            <h4 className=\"text-danger\">Products</h4>\r\n                        )}\r\n\r\n                    {products.length < 1 && <p>No products found</p>}\r\n\r\n                    <div className=\"row pb-5\">\r\n                        {products.map((p) => (\r\n                            <div key={p._id} className=\"col-md-4 mt-3\">\r\n                                <ProductCard product={p} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Shop;"]},"metadata":{},"sourceType":"module"}